<!doctype html>
<html>
<head>
<title>Example FabricJS2</title>
<meta name="description" content="Free and simple pfp generator." />
<link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
label {
display: block;
}
input,
label {
margin: 0.4rem 0;
}
input[type="text"] {
width: 250px;
padding: 15px 12px;
margin-bottom: 5px;
border: 1px solid #e5e5e5;
border-bottom: 2px solid #ddd;
background: #f2f2f2;
color: #555;
}
.sm {
width: 50px;
padding: 15px 12px;
margin-bottom: 5px;
border: 1px solid #e5e5e5;
border-bottom: 2px solid #ddd;
background: #f2f2f2;
color: #555;
}
input[type="file"] {
display: none;
}  
button[onclick*="()"] {
cursor: pointer;
}
button {
padding: 0.5rem 1rem;
border: 1px solid #d0d7de;
border-radius: 0.25rem;
background-color: #f6f8fa;
box-shadow: 0 1px 0 rgba(27, 31, 36, 0.1);
}
button:hover {
background-color: #d8dee4;
}
.row {
display:table;
clear: both;
}
.col {
display:table-cell;
width:48%;
}
.wm {
position: relative;
}
/*
.wm:after {
content: "";
display: block;
width: 100%;
height: 100%;
position: absolute;
top: 0px;
left: 0px;
background-image: url("http://placehold.it/100x100/09f/fff.png");
background-size: 100px 100px;
background-position: 30px 30px;
background-repeat: no-repeat;
opacity: 0.7;
}
*/
</style>
<script src="js/jquery.min.js"></script>
<script src="js/fabric.min.js"></script>
<script src="js/FileSaver.js"></script>
<script src="js/canvas-toBlob.js"></script>
</head>

<body>
<span class="bg"></span>
<div class="container">
<h2 id="example-fabricjs2">Example Fabricjs2</h2>
<p>
<div class="wm">
<canvas id="c" width="525" height="531"></canvas>
<p></p>
</div>
</p>
<p>
<div id="imgur">
<input class="imgur" type="file" id="imgLoader" accept="image/*">
</div>
</p>
<div class="row">
<div class="col">
<p><strong><i class="fa fa-adjust"></i> Brightness:</strong></p>
<!--<input type="range" id="brightness-value" value="0" min="-255" max="255">-->
<p>
<button id="bv"></button>
<input id="brightness-value" value="0" type="range">
</p>
</div>
<div class="col">
<p><strong><i class="fa fa-balance-scale"></i> Scale:</strong></p>
<!--<input type="range" id="scale-value" value="100" min="50" max="200">-->
<p>
<button id="sv"></button>
<input id="scale-value" value="100" type="range">
</p>
</div>
</div>
<p>
<input type="text" id="textInput" placeholder="write something"/>
<button class="sm" onClick="window.location.reload();"><i class="fa fa-refresh"></i></button>
</p>
<p>
<button onclick="selectFile()"><i class="fa fa-upload"></i> PILIH FILE</button>
<button id="save-btn" disabled><i class="fa fa-download"></i> SAVE IMAGE</button>
<button id="shared"><i class="fa fa-share-alt"></i> SHARE</button>
</p>
</div>
<div id="footer">
<center>
<small> Twibbon by <a href="#">Ferry Ayunda</a></small>
</center>
</div>
<script src="js/app.js"></script>
<script src="js/bg.js"></script>
<script src="js/shared.js"></script>
<script>
$("document").ready(function() {

$('input[type=file]').on("change", function() {

var $files = $(this).get(0).files;

if ($files.length) {

// Reject big files
if ($files[0].size > $(this).data("max-size") * 1024) {
console.log("Please select a smaller file");
return false;
}

// Begin file upload
console.log("Uploading file to Imgur..");

// Replace ctrlq with your own API key
var apiUrl = 'https://api.imgur.com/3/image';
var apiKey =  '4ddb1cef2cbd23a'; //key not working
var settings = {
async: false,
crossDomain: true,
processData: false,
contentType: false,
type: 'POST',
url: apiUrl,
headers: {
Authorization: 'Client-ID ' + apiKey,
Accept: 'application/json'
},
mimeType: 'multipart/form-data'
};

var formData = new FormData();
formData.append("image", $files[0]);
settings.data = formData;

// Response contains stringified JSON
// Image URL available at response.data.link
$.ajax(settings).done(function(response) {
console.log(JSON.parse(response));
$('p').text('~ '+JSON.parse(response).data.link);
});

}
});
});
</script>
</body>
</html>
